<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0">
    <title> GORODOK Team ‚Äî Dashboard</title>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&display=swap">
    <style>
        /* --- –°–¢–ò–õ–Ü –ï–ö–†–ê–ù–£ –í–•–û–î–£ --- */
        #login-screen {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: #fbfbfd; display: flex; align-items: center; justify-content: center;
            z-index: 9999; font-family: 'Inter', sans-serif;
        }
        .login-box {
            background: white; padding: 40px; border-radius: 22px;
            box-shadow: 0 4px 16px rgba(0,0,0,0.1); border: 1px solid #d2d2d7;
            text-align: center; max-width: 320px; width: 90%;
        }
        .login-box h2 { margin-bottom: 20px; font-size: 20px; }
        .login-box input {
            width: 100%; padding: 12px; margin-bottom: 15px;
            border: 1px solid #d2d2d7; border-radius: 12px; font-size: 16px;
            outline: none; transition: border-color 0.2s;
        }
        .login-box input:focus { border-color: #0071e3; }
        .login-box button {
            width: 100%; padding: 12px; background: #0071e3;
            color: white; border: none; border-radius: 12px;
            font-size: 16px; font-weight: 600; cursor: pointer;
        }
        .error-msg { color: #ff3b30; font-size: 13px; margin-top: 10px; display: none; }

        /* --- –í–ê–®–Ü –û–†–ò–ì–Ü–ù–ê–õ–¨–ù–Ü –°–¢–ò–õ–Ü --- */
        * { margin: 0; padding: 0; box-sizing: border-box; }
        :root {
            --color-bg: #fbfbfd;
            --color-text: #1d1d1f;
            --color-text-secondary: #6e6e73;
            --color-card-bg: #ffffff;
            --color-accent: #0071e3;
            --color-border: #d2d2d7;
            --shadow-md: 0 4px 16px rgba(0, 0, 0, 0.08);
            --group-sales: #0071e3;    
            --group-eff: #af52de;      
            --group-acc: #ff9500;      
            --group-services: #34c759; 
        }

        body {
            font-family: 'Inter', -apple-system, sans-serif;
            background-color: var(--color-bg);
            color: var(--color-text);
            line-height: 1.5;
            -webkit-font-smoothing: antialiased;
        }

        /* –ü—Ä–∏—Ö–æ–≤–∞–Ω–æ –¥–æ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—ó */
        #main-content { display: none; }

        nav {
            background: rgba(255, 255, 255, 0.8);
            backdrop-filter: blur(20px);
            position: sticky;
            top: 0;
            z-index: 1000;
            border-bottom: 1px solid var(--color-border);
            height: 48px;
            display: flex;
            align-items: center;
        }

        .nav-content {
            max-width: 1100px;
            margin: 0 auto;
            width: 100%;
            padding: 0 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .nav-logo { font-weight: 600; font-size: 17px; cursor: pointer; }
        .logout-btn { font-size: 12px; color: var(--color-text-secondary); cursor: pointer; border: none; background: none; }

        .container { max-width: 1100px; margin: 0 auto; padding: 40px 20px; }
        header { margin-bottom: 40px; }
        header h1 { font-size: 40px; font-weight: 600; letter-spacing: -0.02em; }
        header p { color: var(--color-text-secondary); font-size: 21px; }

        .cards-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
            gap: 20px;
        }

        .card {
            background: var(--color-card-bg);
            border-radius: 22px;
            padding: 24px;
            border: 1px solid var(--color-border);
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            display: flex;
            flex-direction: column;
            text-decoration: none;
            color: inherit;
        }

        .card:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow-md);
            border-color: transparent;
        }
        
        .special-card { border: 1.5px solid var(--color-accent); background: #f0f7ff; }
        .chart-card { border: 1.5px solid #ff9500; background: #fffcf5; }
        .plan-fact-card { border: 1.5px solid #34c759; background: #f0fff4; }

        .card-header { display: flex; align-items: center; margin-bottom: 20px; }
        
        .avatar {
            width: 56px; height: 56px; border-radius: 50%; margin-right: 16px;
            display: flex; align-items: center; justify-content: center;
            color: white; font-weight: 600; font-size: 20px;
            flex-shrink: 0; 
        }

        .card-title h2 { font-size: 18px; font-weight: 600; }
        .card-title p { font-size: 13px; color: var(--color-text-secondary); }

        .main-metric { margin-bottom: 20px; }
        .main-metric-label { font-size: 11px; text-transform: uppercase; font-weight: 600; color: var(--color-text-secondary); }
        .main-metric-value { font-size: 30px; font-weight: 600; }

        .secondary-metrics {
            display: grid; grid-template-columns: 1fr 1fr; gap: 12px;
            padding-top: 16px; border-top: 1px solid var(--color-border);
        }

        .metric-mini-label { font-size: 10px; color: var(--color-text-secondary); text-transform: uppercase; }
        .metric-mini-value { font-size: 15px; font-weight: 600; }

        .detail-page {
            display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: var(--color-bg); z-index: 2000; overflow-y: auto; padding: 40px 20px;
        }
        .detail-page.active { display: block; }
        .detail-container { max-width: 900px; margin: 0 auto; }
        
        .metric-group {
            margin-bottom: 30px;
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 15px;
        }
        .group-title {
            grid-column: 1 / -1;
            font-size: 14px;
            font-weight: 600;
            color: var(--color-text-secondary);
            margin-bottom: 5px;
            padding-left: 5px;
            text-transform: uppercase;
        }

        .detail-metric-card {
            background: #fff; padding: 20px; border-radius: 18px;
            border-left: 4px solid var(--color-border);
        }
        
        .group-sales .detail-metric-card { border-left-color: var(--group-sales); }
        .group-eff .detail-metric-card { border-left-color: var(--group-eff); }
        .group-acc .detail-metric-card { border-left-color: var(--group-acc); }
        .group-services .detail-metric-card { border-left-color: var(--group-services); }

        @media (max-width: 600px) {
            header h1 { font-size: 32px; }
            .avatar { width: 50px; height: 50px; font-size: 18px; }
        }
    </style>
</head>
<body>

    <div id="login-screen">
        <div class="login-box">
            <div style="font-size: 40px; margin-bottom: 10px;">üîí</div>
            <h2>GORODOK Dashboard</h2>
            <input type="password" id="pass-input" placeholder="–í–≤–µ–¥—ñ—Ç—å –ø–∞—Ä–æ–ª—å" onkeypress="if(event.key==='Enter') checkPass()">
            <button onclick="checkPass()">–£–≤—ñ–π—Ç–∏</button>
            <p id="error-msg" class="error-msg">–ù–µ–≤—ñ—Ä–Ω–∏–π –ø–∞—Ä–æ–ª—å. –°–ø—Ä–æ–±—É–π—Ç–µ —â–µ —Ä–∞–∑.</p>
        </div>
    </div>

    <div id="main-content">
        <nav>
            <div class="nav-content">
                <div class="nav-logo" onclick="showHome()">Gorodok Sales Dashboard</div>
                <button class="logout-btn" onclick="logout()">–í–∏–π—Ç–∏</button>
            </div>
        </nav>

        <div id="home-page" class="container">
            <header>
                <h1>–ö–æ–º–∞–Ω–¥–∞</h1>
                <p>–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Ç–∞ –≥—Ä–∞—Ñ—ñ–∫–∏ –¥–µ–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç—É</p>
            </header>
            <div id="sales-cards" class="cards-grid"></div>
        </div>

        <div id="detail-page" class="detail-page">
            <div class="detail-container">
                <button onclick="showHome()" style="background:none; border:none; color:var(--color-accent); cursor:pointer; font-size:17px; margin-bottom:30px;">‚Üê –ù–∞–∑–∞–¥</button>
                <div id="detail-content"></div>
            </div>
        </div>
    </div>

    <script>
        // ==========================================
        // –ù–ê–õ–ê–®–¢–£–í–ê–ù–ù–Ø –ü–ê–†–û–õ–Ø
        const SECRET_PASSWORD = "gteam"; // –ó–º—ñ–Ω—é–π—Ç–µ —Ç—É—Ç
        const EXPIRY_DAYS = 30; // –¢–µ—Ä–º—ñ–Ω –≤—Ö–æ–¥—É (–¥–Ω—ñ–≤)
        // ==========================================

        function checkPass() {
            const input = document.getElementById('pass-input').value;
            const error = document.getElementById('error-msg');
            
            if (input === SECRET_PASSWORD) {
                const now = new Date();
                localStorage.setItem('auth_date', now.getTime());
                localStorage.setItem('isAuthorized', 'true');
                unlockSite();
            } else {
                error.style.display = 'block';
                document.getElementById('pass-input').value = '';
            }
        }

        function unlockSite() {
            document.getElementById('login-screen').style.display = 'none';
            document.getElementById('main-content').style.display = 'block';
            loadData();
        }

        function logout() {
            localStorage.removeItem('isAuthorized');
            localStorage.removeItem('auth_date');
            location.reload();
        }

        window.onload = function() {
            const isAuth = localStorage.getItem('isAuthorized');
            const authDate = localStorage.getItem('auth_date');
            
            if (isAuth === 'true' && authDate) {
                const now = new Date().getTime();
                const expiryMs = EXPIRY_DAYS * 24 * 60 * 60 * 1000;
                
                if (now - authDate < expiryMs) {
                    unlockSite();
                } else {
                    logout();
                }
            }
        };

        // --- –í–ê–®–ê –õ–û–ì–Ü–ö–ê –î–ê–ù–ò–• ---
        let currentData = [];

        async function loadData() {
            try {
                const response = await fetch('sales-data.json?t=' + Date.now());
                currentData = await response.json();
                renderCards(currentData);
            } catch (error) { console.error(error); }
        }

        function formatNumber(num) {
            if (num >= 1000000) return (num / 1000000).toFixed(2) + '–ú';
            if (num >= 1000) return (num / 1000).toFixed(1) + '–ö';
            return num;
        }

        function renderCards(data) {
            const container = document.getElementById('sales-cards');
            container.innerHTML = '';

            // –ö–Ω–æ–ø–∫–∏-–∫–∞—Ä—Ç–∫–∏
            const createSpecialCard = (title, subtitle, icon, color, href, isBlank = false) => {
                const card = document.createElement('a');
                card.className = `card ${color}`;
                card.href = href;
                if(isBlank) card.target = '_blank';
                card.innerHTML = `
                    <div class="card-header">
                        <div class="avatar" style="background: ${icon.bg}">${icon.img}</div>
                        <div class="card-title"><h2>${title}</h2><p>${subtitle}</p></div>
                    </div>
                    <div class="main-metric"><div class="main-metric-value" style="font-size:22px">–ü–µ—Ä–µ–≥–ª—è–Ω—É—Ç–∏</div></div>
                `;
                return card;
            };

            container.appendChild(createSpecialCard('–©–æ–¥–µ–Ω–Ω—ñ –ø—Ä–æ–¥–∞–∂—ñ', '–ê–Ω–∞–ª—ñ—Ç–∏–∫–∞ –ø–æ –¥–Ω—è—Ö', {bg:'var(--color-accent)', img:'üìä'}, 'special-card', 'daily.html'));
            container.appendChild(createSpecialCard('–ì—Ä–∞—Ñ—ñ–∫ –≤–∏—Ö–æ–¥—É', 'Google Sheets', {bg:'#ff9500', img:'üìÖ'}, 'chart-card', 'https://docs.google.com/spreadsheets/d/1-sUZg6C6w3-lImTpIv2ezkW-mKtK8zXZ_zf4bCK83R8/edit#gid=973370496', true));
            container.appendChild(createSpecialCard('–ü—Ä–æ–¥–∞–∂—ñ –ü–ª–∞–Ω –§–∞–∫—Ç', '–ê–Ω–∞–ª—ñ—Ç–∏–∫–∞ –≤–∏–∫–æ–Ω–∞–Ω–Ω—è', {bg:'#34c759', img:'üìà'}, 'plan-fact-card', 'plan-fact.html'));

            // –ü—Ä–æ–¥–∞–≤—Ü—ñ
            data.forEach(person => {
                const to = person.metrics['–¢–û'] || {value: 0, unit: '–≥—Ä–Ω'};
                const acc = person.metrics['% –î–æ–ª—è ACC'] || {value: 0, unit: '%'};
                const services = person.metrics['–î–æ–ª—è –ü–æ—Å–ª—É–≥'] || {value: 0, unit: '%'};

                const card = document.createElement('div');
                card.className = 'card';
                card.onclick = () => showDetail(person.id);
                card.innerHTML = `
                    <div class="card-header">
                        <div class="avatar" style="background: ${person.gradient}">${person.initials}</div>
                        <div class="card-title"><h2>${person.name}</h2><p>${person.position}</p></div>
                    </div>
                    <div class="main-metric">
                        <div class="main-metric-label">–¢–æ–≤–∞—Ä–æ–æ–±—ñ–≥</div>
                        <div class="main-metric-value">${formatNumber(to.value)} <span style="font-size:14px">${to.unit}</span></div>
                    </div>
                    <div class="secondary-metrics">
                        <div><div class="metric-mini-label">–î–æ–ª—è ACC</div><div class="metric-mini-value">${acc.value}%</div></div>
                        <div><div class="metric-mini-label">–ü–æ—Å–ª—É–≥–∏</div><div class="metric-mini-value">${services.value}%</div></div>
                    </div>
                `;
                container.appendChild(card);
            });
        }

        function showDetail(id) {
            const person = currentData.find(p => p.id === id);
            if (!person) return;
            const m = person.metrics;
            const detailContent = document.getElementById('detail-content');
            const block = (key) => {
                const item = m[key] || {value: 0, unit: '-'};
                return `
                    <div class="detail-metric-card">
                        <div style="font-size:11px; color:var(--color-text-secondary); text-transform:uppercase">${key}</div>
                        <div style="font-size:22px; font-weight:600">
                            ${item.value.toLocaleString('uk-UA')} <span style="font-size:14px; font-weight:400">${item.unit}</span>
                        </div>
                    </div>
                `;
            };
            detailContent.innerHTML = `
                <div style="display:flex; align-items:center; margin-bottom:40px;">
                    <div class="avatar" style="width:80px; height:80px; font-size:28px; background:${person.gradient}">${person.initials}</div>
                    <div><h1 style="font-size:32px">${person.name}</h1><p style="color:var(--color-text-secondary)">${person.position}</p></div>
                </div>
                <div class="group-title">üí∞ –ü—Ä–æ–¥–∞–∂—ñ —Ç–∞ –û–±—ñ–≥</div>
                <div class="metric-group group-sales">${block('–¢–û')} ${block('ASP')} ${block('–°—Ä. –ß–µ–∫')}</div>
                <div class="group-title">‚ö° –ï—Ñ–µ–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å</div>
                <div class="metric-group group-eff">${block('–®—Ç.')} ${block('–ß–µ–∫–∏')} ${block('–ü–ß')} ${block('–ö–ü–ß')} ${block('–ö–æ–Ω–≤–µ—Ä—Å—ñ—è –ü–ö')}</div>
                <div class="group-title">üéß –ê–∫—Å–µ—Å—É–∞—Ä–∏ (ACC)</div>
                <div class="metric-group group-acc">${block('ACC')} ${block('% –î–æ–ª—è ACC')}</div>
                <div class="group-title">üõ† –ü–æ—Å–ª—É–≥–∏ —Ç–∞ –£–î–°</div>
                <div class="metric-group group-services">${block('–ü–æ—Å–ª—É–≥–∏ –≥—Ä–Ω')} ${block('–î–æ–ª—è –ü–æ—Å–ª—É–≥')} ${block('–£–î–°')} ${block('–î–æ–ª—è –£–î–°')}</div>
            `;
            document.getElementById('detail-page').classList.add('active');
            document.getElementById('home-page').style.display = 'none';
            window.scrollTo(0, 0);
        }

        function showHome() {
            document.getElementById('detail-page').classList.remove('active');
            document.getElementById('home-page').style.display = 'block';
            window.scrollTo(0, 0);
        }

        // –°–≤–∞–π–ø–∏
        let touchStartX = 0, touchStartY = 0, isSwiping = false;
        document.addEventListener('touchstart', e => { touchStartX = e.changedTouches[0].screenX; touchStartY = e.changedTouches[0].screenY; isSwiping = true; }, { passive: true });
        document.addEventListener('touchend', e => {
            const distanceX = e.changedTouches[0].screenX - touchStartX;
            const distanceY = Math.abs(e.changedTouches[0].screenY - touchStartY);
            if (isSwiping && distanceX > 120 && distanceY < 50) {
                if (document.getElementById('detail-page').classList.contains('active')) showHome();
            }
            isSwiping = false;
        }, { passive: true });
    </script>
</body>
</html>
